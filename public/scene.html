<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Karaoke Nite (Beta)</title>

    <meta name="description" content="Karaoke with friends & family on the web or in VR. Brand new quarantine pastime. Currently in Beta!" />

    <!-- Include A-Frame script -->
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!-- <script src="https://rawgit.com/aframevr/aframe/931210e/dist/aframe-master.min.js"></script> -->

    <!-- Include scripts for networked-aframe -->
    <script src="https://unpkg.com/networked-aframe@^0.7.0/dist/networked-aframe.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>

    <!-- Use a custom component to expose properties to networked-aframe. -->
    <!-- <script src="/video-transport.js"></script> -->
    <script src="/js/video-sync.js"></script>
    <script src="/js/host.js"></script>
    <script src="/js/dynamic-room.js"></script>
    <!--     <script src="/js/spawn-in-circle.js"></script> -->
    <!--     <script src="../server.js"></script>
     -->

<!--     <script src="/socket.io/socket.io.js"></script>
 -->
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- jQuery Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css"
      type="text/css"
    />

    <!-- Keyboard -->
    <!--     <script src="https://unpkg.com/aframe-super-keyboard@1.0.0/dist/aframe-super-keyboard.min.js"></script> -->
    <script src="https://unpkg.com/aframe-super-keyboard@1.0.0/dist/aframe-super-keyboard.js"></script>

    <!-- For snow effect -->
<!--     <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
 -->
    <!-- Randomizer component -->
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>

    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>

    <script src="https://unpkg.com/aframe-slice9-component/dist/aframe-slice9-component.min.js"></script>

    <link
      rel="icon"
      href="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ftechnology.png?v=1588815892670"
    />

    <link href="/styles/scene.css" rel="stylesheet" type="text/css" />
    <link href="/styles/shared.css" rel="stylesheet" type="text/css" />

    <script>

      <!-- Karaoke Playlist (mp4's) -->

      var playlist = [
          "https://cdn.glitch.com/bf4db82b-cdcf-4019-a281-153f8e3d1e9f%2Fletsgetitonencoded.mp4?v=1588473010045"  <!-- Let's Get it On -->
        ];

       var jukebox = [
          "https://cdn.glitch.com/bd2f3733-359c-47c8-8e0b-7f7b493efb47%2Fencoded.mp4",                                    <!-- Beast of Burden -->
          "https://cdn.glitch.com/bf4db82b-cdcf-4019-a281-153f8e3d1e9f%2Fkillingmesoftly.mp4",                            <!-- Killing Me Softly -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FCoheed_And_Cambria_Blood_Red_Summer.mp4",        <!-- Blood Red Summer -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FWheatus_Teenage_Dirtbag.mp4",                    <!-- Teenage Dirtbag -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FTaylor_Swift_Red.mp4",                           <!-- Red -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FGorillaz_Feel_Good_Inc.mp4",                     <!-- Feel Good Inc -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FOld_Crow_Medicine_Show_Wagon_Wheel.mp4",         <!-- Wagon Wheel -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FJ_Cole_Power_Trip.mp4",                          <!-- Power Trip -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FDua_Lipa_Don_t_Start_Now.mp4",                   <!-- Don't Start Now -->
          "https://cdn.glitch.com/bf4db82b-cdcf-4019-a281-153f8e3d1e9f%2Fletsgetitonencoded.mp4",                         <!-- Let's Get it On -->
          "https://cdn.glitch.com/b5b49e97-d435-4e07-920c-7156ab5602a2%2FThe_Shins_New_Slang.mp4",                        <!-- New Slang -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsabrina-boys-summertime-love.m4v",               <!-- Boys -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fredbone-come-and-get-your-love.m4v",             <!-- Come and Get Your Love -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fkate-bush-running-up-that-hill.m4v",             <!-- Running Up That Hill -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ffat-joe-whats-luv.m4v",                          <!-- What's Luv -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fblack-eyed-peas-where-is-the-love.m4v",          <!-- Where Is the Love? -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fa-star-is-born-shallow.m4v",                     <!-- Shallow -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fdavid-bowie-%20starman.m4v",                     <!-- Starman -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ftamia-so-into-you.m4v",                          <!-- So Into You -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fmoana-how-far-ill-go.m4v",                       <!-- How Far I'll Go -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Favril-lavigne-complicated.m4v",                  <!-- Complicated -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fcoldplay-the-scientist.m4v",                     <!-- The Scientist -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fkanye-west-slow-jamz.m4v",                       <!-- Slow Jamz -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fkid-rock-only-god-knows-why.m4v",                <!-- Only God Knows Why -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fincubus_drive.m4v",                              <!-- Drive -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fmgmt-electric-feel.m4v",                         <!-- Electric Feel -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fti-whatever-you-like.m4v",                       <!-- Whatever You Like -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fbillie-eilish-when-the-partys-over.m4v",         <!-- When the Party's Over -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fthe-strokes-last-nite.m4v",                      <!-- Last Nite -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fboston-more-than-a-feeling.m4v",                 <!-- More Than a Feeling -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fpixies-where-is-my-mind.m4v",                    <!-- Where Is My Mind -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Faersomith-cryin.m4v",                            <!-- Cryin' -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fnicki-minaj-super-bass.m4v",                     <!-- Super Bass -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fthe-mamas-and-the-papas-california-dreamin.m4v", <!-- California Dreamin' -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsheryl-crow-first-cut-is-the-deepest.m4v",       <!-- First Cut Is the Deepest -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FBlackpink-Ddu-Du-Ddu-Du.m4v",                    <!-- Ddu-Du Ddu-Du (ÎöúÎëêÎöúÎëê) -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fcamila-cabello-havana.m4v",                      <!-- Havana -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FBlue_Swede_Hooked_On_A_Feeling.m4v",             <!-- Hooked on a Feeling -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fadele_%20hello.m4v",                             <!-- Hello -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FDrake_Best_I_Ever_Had.m4v",                      <!-- Best I Ever Had -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fbeyonce-crazy-in-love.m4v",                      <!-- Crazy in Love -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fjonas-brothers-burnin-up.m4v",                   <!-- Burnin' Up -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Flizzo-truth-hurts.m4v",                          <!-- Truth Hurts -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fbts-boy-with-luv.m4v",                           <!-- Boy with Luv -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fcardi-b-bodak-yellow.m4v",                       <!-- Bodak Yellow -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FThe_Beatles_Yesterday.m4v",                      <!-- Yesterday -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fshawn_mendes_senorita.m4v",                      <!-- Se√±orita -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FWhitney_Houston_I_Will_Always_Love_You.m4v",     <!-- I Will Always Love You -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FRed_Hot_Chili_Peppers_Under_The_Bridge.m4v",     <!-- Under the Bridge -->
          "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FDolly_Parton_Jolene.m4v"                          <!-- Jolene -->
       ];

        // These match up to the jukebox array above
        // We should probably switch to an array of objects... after the big refactor!
       var songNames = [
          "Beast of Burden",
          "Killing Me Softly",
          "Blood Red Summer",
          "Teenage Dirtbag",
          "Red",
          "Feel Good Inc",
          "Wagon Wheel",
          "Power Trip",
          "Don't Start Now",
          "Let's Get it On",
          "New Slang",
          "Boys",
          "Come and Get Your Love",
          "Running Up That Hill",
          "What's Luv",
          "Where Is the Love?",
          "Shallow",
          "Starman",
          "So Into You",
          "How Far I'll Go",
          "Complicated",
          "The Scientist",
          "Slow Jamz",
          "Only God Knows Why",
          "Drive",
          "Electric Feel",
          "Whatever You Like",
          "When the Party's Over",
          "Last Nite",
          "More Than a Feeling",
          "Where Is My Mind",
          "Cryin'",
          "Super Bass",
          "California Dreamin'",
          "The First Cut Is the Deepest",
          "Ddu-Du Ddu-Du (ÎöúÎëêÎöúÎëê)",
          "Havana",
          "Hooked on a Feeling",
          "Hello",
          "Best I Ever Had",
          "Crazy in Love",
          "Burnin' Up",
          "Truth Hurts",
          "Boy with Luv (ÏûëÏùÄ Í≤ÉÎì§ÏùÑ ÏúÑÌïú Ïãú)",
          "Bodak Yellow",
          "Yesterday",
          "Se√±orita",
          "I Will Always Love You",
          "Under the Bridge",
          "Jolene"
       ]

      function findParentButton(element) {
        if (!element) {
          return undefined;
        }

        if (element.tagName === "BUTTON") {
          return element;
        }

        return findParentButton(element.parentElement);
      }

      var selectedElement;
      var selectedIndex;
      var addedSong;

      function grabURL(event, num) {
        if (selectedElement) {
          selectedElement.className = "jukebox";
        }

        selectedIndex = num;
        selectedElement = findParentButton(event.target);
        selectedElement.className = "jukebox jukebox-selected";

        document.getElementById("choose-song").removeAttribute("disabled");
      }

      function addSong() {
        playlist.push(jukebox[selectedIndex]);

        document.getElementById("choose-song").setAttribute("disabled", true);
        document.getElementById("added-notice").setAttribute("populated", true);
        document.getElementById("added-notice-song").textContent = songNames[selectedIndex];

        selectedElement.className = "jukebox";
        selectedElement = selectedIndex = undefined;
        
        setTimeout(dismissAddedNotice, 2000);
      }

      function dismissAddedNotice() {
        document.getElementById("added-notice").removeAttribute("populated");
      }

        <!-- ‚èØ Play & Pause buttons ‚èØ -->

      AFRAME.registerComponent('play-pause', {
        init: function () {
         var myVideo = document.querySelector('#html-video');

         var videoControls = document.querySelector('#videoControls');
         this.el.addEventListener('click', function () {

              var videoSync = document.querySelector('[video-sync]');
          if (myVideo.paused) {
                // Play
      	    // myVideo.play();
                videoSync.setAttribute('video-sync', 'paused', false);
      	    videoControls.setAttribute('src', '#pause');
          } else {
                // Pause
      	    // myVideo.pause();
                videoSync.setAttribute('video-sync', 'paused', true);
      	    videoControls.setAttribute('src', '#play');
          }
         });
        }
      });

        <!-- ‚è© Next button ‚è© -->

        var i = 0;

      	AFRAME.registerComponent('next', {

        init: function () {

         var myVideo = document.querySelector('#video');

         var videoControls = document.querySelector('#videoControls2');

         this.el.addEventListener('click', function () {

              i++;

              <!-- Start from beginning if needed -->
              if (i == playlist.length) i = 0;

              var videoSync = document.querySelector('[video-sync]');
              videoSync.setAttribute('video-sync', 'src', playlist[i]);
              videoSync.setAttribute('video-sync', 'currentTime', 0);
              console.log('host setting video to ', playlist[i]);

         });
        }
      });

      	AFRAME.registerComponent('previous', {

        init: function () {

         var myVideo = document.querySelector('#video');

         var videoControls = document.querySelector('#previous-button');

         this.el.addEventListener('click', function () {

              i--;

              <!-- Start from beginning if needed -->
              if (i == -1) i = 0;

              var videoSync = document.querySelector('[video-sync]');
              videoSync.setAttribute('video-sync', 'src', playlist[i]);
              videoSync.setAttribute('video-sync', 'currentTime', 0);
              console.log('host setting video to ', playlist[i]);

         });
        }
      });

        AFRAME.registerComponent('volume-low', {

        init: function () {

         var myVideo = document.querySelector('#video');

         var videoControls = document.querySelector('#volume-low-button');

         this.el.addEventListener('click', function () {

         var videoChange = document.querySelector('#html-video');
              videoChange.volume = 0.5;

              console.log('Volume set to low');

         });
        }
      });

      AFRAME.registerComponent('volume-high', {

        init: function () {

          var myVideo = document.querySelector('#video');

          var videoControls = document.querySelector('#volume-high-button');

          this.el.addEventListener('click', function () {

            var videoChange = document.querySelector('#html-video');
            videoChange.volume = 1.0;

            console.log('Volume set to high');

         });
        }
      });
    </script>
    
    
    <!-- Hotjar Tracking Code for https://www.karaokenite.co -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:1946635,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
    
  </head>

  <body>
    <!-- Facebook -->
    <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v8.0" nonce="BCrraDSi"></script>

    
    <script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    
    
    <a-scene dynamic-room>
      <!-- Asset Management System -->

      <a-assets>
        <img
          id="keyboard-image"
          src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsk-basic.png?v=1590379712131"
          crossorigin="annonymous"
        />

        <!-- Buttons -->

        <img
          id="play"
          src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fplay.png?v=1589407864805"
          crossorigin="anonymous"
        />
        <img
          id="pause"
          src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fpause.png?v=1589407941269"
          crossorigin="anonymous"
        />

        <img
          id="next"
          src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fnext.png?v=1589407819880"
          crossorigin="anonymous"
        />
        <img
          id="previous"
          src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fprevious.png?v=1589407813380"
          crossorigin="anonymous"
        />

        <img
          id="volume-low"
          src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fvolume1.png?v=1589410578173"
          crossorigin="anonymous"
        />
        <img
          id="volume-high"
          src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fvolume2.png?v=1589410579945"
          crossorigin="anonymous"
        />

        <!-- Grid and sky -->

        <img
          id="grid"
          src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png"
          crossorigin="anonymous"
        />
        <img
          id="sky"
          src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg"
          crossorigin="anonymous"
        />

        <!-- Templates (Added in A-Frame's <a-assets> tag) -->

        <!-- Because this video needs crossorigin etc., we need to use  
             a-video src with selector, not a-plane material src string. -->

        <video
          id="html-video"
          src="https://cdn.glitch.com/bf4db82b-cdcf-4019-a281-153f8e3d1e9f%2Fletsgetitonencoded.mp4?v=1588473010045"
        ></video>

        <!-- Video template -->

        <template id="video-template">
          <a-entity scale="2 0.9 1">
            <a-video
              video-sync
              class="front"
              material="side:front"
              src="#html-video"
            ></a-video>
            <a-plane
              class="back"
              rotation="0 180 0"
              material="color:red;side:front"
              text="align:center;wrapCount:8;value: MVP is live!"
            ></a-plane>
          </a-entity>
        </template>

        <!-- Avatar template -->

        <template id="avatar-template">
          <a-entity class="avatar" networked-audio-source>
            <a-entity
              class="nametag"
              text="value: Hello World; align:center;"
              position="0 0.7 0"
              rotation="0 180 0"
              scale="8 8 8"
            ></a-entity>
            <a-sphere
              class="head"
              color="#5985ff"
              scale="0.45 0.5 0.4"
              random-color
            ></a-sphere>
            <a-entity class="face" position="0 0.05 0">
              <a-sphere
                class="eye"
                color="#efefef"
                position="0.16 0.1 -0.35"
                scale="0.12 0.12 0.12"
              >
                <a-sphere
                  class="pupil"
                  color="#000"
                  position="0 0 -1"
                  scale="0.2 0.2 0.2"
                >
                </a-sphere>
              </a-sphere>
              <a-sphere
                class="eye"
                color="#efefef"
                position="-0.16 0.1 -0.35"
                scale="0.12 0.12 0.12"
              >
                <a-sphere
                  class="pupil"
                  color="#000"
                  position="0 0 -1"
                  scale="0.2 0.2 0.2"
                >
                </a-sphere> </a-sphere
              >s
            </a-entity>
          </a-entity>
        </template>

        <!-- /Templates -->
      </a-assets>

      <a-entity environment="preset: osiris"></a-entity>

      <a-entity
        id="player"
        host
        networked="template: #avatar-template; attachTemplateToLocal: false;"
        camera
        position="0 1.3 0"
        spawn-in-circle="radius:1"
        wasd-controls
        look-controls
        animation="property: object3D.position.y; to: 1.45; dir: alternate; dur: 1000; loop: true"
      >
        <a-entity class="nametag"></a-entity>

        <a-sphere class="head" visible="false" random-color></a-sphere>
      </a-entity>
    

      <!-- Play / Pause buttons -->

      <a-image
        id="videoControls"
        src="#play"
        position="-0.4 1 -1"
        scale="0.2 0.2 1"
        play-pause
        animation__mouseenter="property: scale; to: 0.27 0.27 1; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 0.2 0.2 1; dur: 300; startEvents: mouseleave"
      >
      </a-image>

      <!-- Next button -->

      <a-image
        id="videoControls2"
        src="#next"
        position="-0.1 1 -1"
        scale="0.2 0.2 1"
        next
        animation__mouseenter="property: scale; to: 0.27 0.27 1; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 0.2 0.2 1; dur: 300; startEvents: mouseleave"
      >
      </a-image>

      <!-- Previous button -->

      <a-image
        id="previous-button"
        src="#previous"
        position="-0.7 1 -1"
        scale="0.2 0.2 1"
        previous
        animation__mouseenter="property: scale; to: 0.27 0.27 1; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 0.2 0.2 1; dur: 300; startEvents: mouseleave"
      >
      </a-image>

      <!-- Volume Low button -->

      <a-image
        id="volume-low-button"
        src="#volume-low"
        position="0.4 1 -1"
        scale="0.2 0.2 1"
        volume-low
        animation__mouseenter="property: scale; to: 0.27 0.27 1; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 0.2 0.2 1; dur: 300; startEvents: mouseleave"
      >
      </a-image>

      <!-- Volume High button -->

      <a-image
        id="volume-high-button"
        src="#volume-high"
        position="0.7 1 -1"
        scale="0.2 0.2 1"
        volume-high
        animation__mouseenter="property: scale; to: 0.27 0.27 1; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 0.2 0.2 1; dur: 300; startEvents: mouseleave"
      >
      </a-image>

      <!-- Camera and Cursor -->

      <a-camera>
        <!-- 			  <a-cursor color="#FAFAFA"></a-cursor> -->
      </a-camera>

      <!-- Sky and Snow -->

      <a-sky src="#sky" rotation="0 -90 0"></a-sky>

<!--       <a-entity id="particles" particle-system="preset: snow"></a-entity>
 -->

      <a-entity
        text="value: WELCOME!!!; color: #BBB; font: monoid;"
        position="0.8 2 -0.8"
        scale="1.0 1.0 1.0"
      >
        <!--         <a-entity
          text="value: Welcome!!; color: #BBB; font: monoid;"
          position="0 0.06 0"
          scale="1.0 1.0 1.0"
        >
        </a-entity> -->
<!--         <a-entity slice9="width: 2; left:0.1; padding: 0.1; opacity: 0.5; transparent: true;" position="0.8 2 -0.8"></a-entity>
 -->
      </a-entity>

     
      
      
      
      
      <!-- Keyboard -->

      <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>

      <!-- Change hand to `hand` for VR. -->
      <!--     <a-entity id="keyboard" super-keyboard="hand: #mouseCursor1; imagePath:https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsk-basic.png?v=1590379712131" position="0 1 -0.5" rotation="-30 0 0"></a-entity>
       -->
    </a-scene>

    <script>
      //       // On mobile remove elements that are resource heavy
      //       var isMobile = AFRAME.utils.device.isMobile();

      //       if (isMobile) {
      //         var particles = document.getElementById("particles");
      //         particles.parentNode.removeChild(particles);
      //       }

      // Define custom schema for syncing avatar color, set by random-color
      NAF.schemas.add({
        template: "#avatar-template",
        components: [
          "position",
          "rotation",
          {
            selector: ".head",
            component: "material",
            property: "color"
          },
          {
            selector: ".nametag",
            component: "text",
            property: "value"
          }
        ]
      });

      NAF.schemas.add({
        template: "#video-template",
        components: [
          "position",
          "rotation",
          {
            selector: ".front",
            component: "video-sync",
            property: "paused"
          },
          {
            selector: ".front",
            component: "video-sync",
            property: "src"
          },
          {
            selector: ".front",
            component: "video-sync",
            property: "currentTime"
          }
        ]
      });

      console.log("Registered templates");
    </script>

    <script>
      function onConnect() {
        // The first client is the NOT only one that sees no other clients after connection,
        // so it is NOT safe to take ownership of singletons immediately upon onConnect.
        // We'll listen for a certain period, and if no client connections, take ownership.
        // FIXME: How to determine the timeout?  Race condition.

        console.warn("onConnect() ", new Date());

        document.body.addEventListener("clientDisconnected", function(evt) {
          console.warn("clientDisconnected ", evt.detail.clientId);
        });
      }
    </script>

    <script>
      var presets = ["contact", "forest", "yavapai", "arches", "osiris"];

      // <a-entity environment="preset: forest"></a-entity>

      var environment = document.querySelector("[environment]");

      function setEnvironment(newPreset) {
        environment.setAttribute("environment", { preset: newPreset });
      }

      function getNextPreset() {
        var currentPreset = environment.getAttribute("environment").preset;
        var index = presets.indexOf(currentPreset);
        return presets[(index + 1) % presets.length];
      }

      window.addEventListener("keydown", function(evt) {
        if (evt.keyCode === 32 /* spacebar */) {
          var newPreset = getNextPreset();
          setEnvironment(newPreset);
          // room.components.sharedspace.send('*', { type: 'environment', preset: preset });
        }
      });
    </script>

    <!-- Logo -->

    <h1 id="scene-logo">
      <a href="https://karaokenite.co" target="_blank">
        KARAOKE NITE
      </a>
      <span class="tag-tilt">beta</span>
    </h1>

    <!-- Invite Modal -->
    
    <div id="inviteModal" class="modal">
      <h2>Invite your friends!</h2>
      <p>
        Send the link to a friend to invite them to this karaoke room.<br> <br>üîë The room name is <span alt="Room name" id="roomName"></span>
      </p>
      <div class="copyWrapper">
        <input type="text" value="https://www.karaokenite.co" id="myInput" />
        <div class="tooltip">
          <button
            class="button button-bold"
            id="copy"
            onclick="myFunction()"
            onmouseout="outFunc()"
          >
            <span class="tooltiptext" id="myTooltip">Copy to clipboard</span>
            Copy
          </button>
        </div>
      </div>

      <br />
    

      <div class="shareButton">
        
<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-text="Come hang in my karaoke room! The room name is... üîë" data-url="https://karaokenite.co" data-via="karaoke_nite" data-related="" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>     
      
 
<div id="shareButton" class="fb-share-button" data-href="https://karaokenite.co" data-layout="button_count" data-size="large"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkaraokenite.co%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a></div>
      </div>
  
</div>
    
  

      <br />

      <!--         <div class="controls">
         <a class="button" href="#" rel="modal:close">Done</a>
      </div>      -->
  

    <div id="songModal" class="modal">
      <div class="jukeboxes" onscroll="dismissAddedNotice()">
        <button onclick="grabURL(event, 0)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Frolling-stones-some-girls.jpg?v=1591040877607"
            alt="Beast of Burden"
            width="600"
            height="400"
          />

          <div class="title">Beast of Burden</div>
          <div class="artist">The Rolling Stones</div>
        </button>

        <button onclick="grabURL(event, 1)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ffugees-the-score.png?v=1591040952706"
            alt="Killing Me Softly"
            width="600"
            height="400"
          />
          <div class="title">Killing Me Softly</div>
          <div class="artist">Fugees</div>
        </button>

        <button onclick="grabURL(event, 2)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fcoheed-and-cambria-in-keeping-secrets.jpg?v=1591040969216"
            alt="Blood Red Summer"
            width="600"
            height="400"
          />
          <div class="title">Blood Red Summer</div>
          <div class="artist">Coheed and Cambria</div>
        </button>

        <button onclick="grabURL(event, 3)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fwheatus-wheatus.jpg?v=1591114972728.jpg"
            alt="Teenage Dirtbag"
            width="600"
            height="400"
          />

          <div class="title">Teenage Dirtbag</div>
          <div class="artist">Wheatus</div>
        </button>

        <button onclick="grabURL(event, 4)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ftaylor-swift-red.png?v=1591115004639"
            alt="Red"
            width="600"
            height="400"
          />

          <div class="title">Red</div>
          <div class="artist">Taylor Swift</div>
        </button>

        <button onclick="grabURL(event, 5)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fgorillaz-demon-days.jpg?v=1591115146848"
            alt="Feel Good Inc."
            width="600"
            height="400"
          />
          <div class="title">Feel Good Inc.</div>
          <div class="artist">Gorillaz</div>
        </button>

        <button onclick="grabURL(event, 6)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fold-crow-medicine-show-ocms.jpg?v=1591115180138"
            alt="Wagon Wheel"
            width="600"
            height="400"
          />
          <div class="title">Wagon Wheel</div>
          <div class="artist">Old Crow Medicine Show</div>
        </button>

        <button onclick="grabURL(event, 7)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fj-cole-born-sinner.jpg?v=1591115254771"
            alt="Power Trip"
            width="600"
            height="400"
          />
          <div class="title">Power Trip feat. Miguel</div>
          <div class="artist">J. Cole</div>
        </button>

        <button onclick="grabURL(event, 8)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fdua-lipa-future-nostalgia.png?v=1591115288043"
            alt="Don't Start Now"
            width="600"
            height="400"
          />
          <div class="title">Don't Start Now</div>
          <div class="artist">Duo Lipa</div>
        </button>

        <button onclick="grabURL(event, 9)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fmarvin-gaye-lets-get-it-on.jpg?v=1591115313029"
            alt="Let's Get It On"
            width="600"
            height="400"
          />
          <div class="title">Let's Get It On</div>
          <div class="artist">Marvin Gaye</div>
        </button>

        <button onclick="grabURL(event, 10)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fshins-oh-inverted-world.jpg?v=1591115405298"
            alt="New Slang"
            width="600"
            height="400"
          />
          <div class="title">New Slang</div>
          <div class="artist">The Shins</div>
        </button>

        <!-- Sabrina - Boys (Summertime Love) -->
        <button onclick="grabURL(event, 11)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsabrina-sabrina.jpg?v=1591157973806"
            alt="Boys (Summertime Love)"
            width="600"
            height="400"
          />
          <div class="title">Boys (Summertime Love)</div>
          <div class="artist">Sabrina</div>
        </button>

        <!-- Redbone - Come and Get Your Love -->
        <button onclick="grabURL(event, 12)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fredbone-wovoka.jpg?v=1591158069587"
            alt="Come and Get Your Love"
            width="600"
            height="400"
          />
          <div class="title">Come and Get Your Love</div>
          <div class="artist">Redbone</div>
        </button>

        <!-- Kate Bush - Running Up That Hill -->
        <button onclick="grabURL(event, 13)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fkate-bush-hounds-of-love.png?v=1591158143497"
            alt="Running Up That Hill"
            width="600"
            height="400"
          />
          <div class="title">Running Up That Hill</div>
          <div class="artist">Kate Bush</div>
        </button>

        <!-- Fat Joe - What's Luv -->
        <button onclick="grabURL(event, 14)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ffat-joe-jealous-ones-still-envy.jpg?v=1591158242429"
            alt="What's Luv"
            width="600"
            height="400"
          />
          <div class="title">What's Luv (ft. Ashanti & Ja Rule)</div>
          <div class="artist">Fat Joe</div>
        </button>

        <!-- Where Is the Love? -->
        <button onclick="grabURL(event, 15)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fthe-black-eyed-peas-elephunk.jpg?v=1592289078276"
            alt="Where Is the Love?"
            width="600"
            height="400"
          />
          <div class="title">Where Is the Love?</div>
          <div class="artist">Black Eyed Peas</div>
        </button>

        <!-- Shallow -->
        <button onclick="grabURL(event, 16)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fa-star-is-born-soundtrack.png?v=1592289621175"
            alt="Shallow"
            width="600"
            height="400"
          />
          <div class="title">Shallow</div>
          <div class="artist">Lady Gaga, Bradley Cooper</div>
        </button>

        <!-- Starman -->
        <button onclick="grabURL(event, 17)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FZiggyStardust.jpg?v=1592290475425"
            alt="Starman"
            width="600"
            height="400"
          />
          <div class="title">Starman</div>
          <div class="artist">David Bowie</div>
        </button>

        <!-- Tamia -->
        <button onclick="grabURL(event, 18)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ftamia-tamia.jpg?v=1592293320960"
            alt="Starman"
            width="600"
            height="400"
          />
          <div class="title">So Into You</div>
          <div class="artist">Tamia</div>
        </button>

        <!-- So Far I'll Go -->
        <button onclick="grabURL(event, 19)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fmoana.jpg?v=1592293556055"
            alt="So Far I'll Go"
            width="600"
            height="400"
          />
          <div class="title">How Far I'll Go</div>
          <div class="artist">Moana</div>
        </button>

        <!-- Complicated -->
        <button onclick="grabURL(event, 20)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Favril-lavigne-let-go.jpg?v=1592350310450"
            alt="Complicated"
            width="600"
            height="400"
          />
          <div class="title">Complicated</div>
          <div class="artist">Avril Lavigne</div>
        </button>

        <!-- The Scientist -->
        <button onclick="grabURL(event, 21)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fcoldplay_a_rush_of_blood_to_the_head.jpg?v=1592345525258"
            alt="The Scientist"
            width="600"
            height="400"
          />
          <div class="title">Coldplay</div>
          <div class="artist">The Scientist</div>
        </button>

        <!-- Slow Jamz -->
        <button onclick="grabURL(event, 22)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fkanye-west-college-dropout.jpg?v=1592345728189"
            alt="Slow Jamz"
            width="600"
            height="400"
          />
          <div class="title">Kanye West</div>
          <div class="artist">Slow Jamz</div>
        </button>

        <!-- Only God Knows Why -->
        <button onclick="grabURL(event, 23)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fkid_rock_devil_without_a_cause.jpg"
            alt="Only God Knows Why"
            width="600"
            height="400"
          />
          <div class="title">Only God Knows Why</div>
          <div class="artist">Kid Rock</div>
        </button>

        <!-- Drive -->
        <button onclick="grabURL(event, 24)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fincubus_make_yourself.jpg?v=1592351374184"
            alt="Drive"
            width="600"
            height="400"
          />
          <div class="title">Drive</div>
          <div class="artist">Incubus</div>
        </button>
        
        <!-- Electric Feel -->
          <button onclick="grabURL(event, 25)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fmgmt-oracular-spectacular.jpg?v=1597048139589"
            alt="Electric Feel"
            width="600"
            height="400"
          />
          <div class="title">Electric Feel</div>
          <div class="artist">MGMT</div>
        </button>
        
        <!-- Whatever You Like -->
         <button onclick="grabURL(event, 26)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fti-paper-trail.jpg?v=1597048556668"
            alt="Whatever You Like"
            width="600"
            height="400"
          />
          <div class="title">Whatever You Like</div>
          <div class="artist">T.I.</div>
        </button>
        
        <!-- When the Party's Over -->
         <button onclick="grabURL(event, 27)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fbillie-eilish-when-we-all-fall-asleep-where-do-we-go.png?v=1597048822150"
            alt="When the Party's Over"
            width="600"
            height="400"
          />
          <div class="title">When the Party's Over</div>
          <div class="artist">Billie Eilish</div>
        </button>
        
        <!-- Last Nite -->
         <button onclick="grabURL(event, 28)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fthe-strokes-is-this-it.jpeg?v=1597049464828"
            alt="Last Nite"
            width="600"
            height="400"
          />
          <div class="title">Last Nite</div>
          <div class="artist">The Strokes</div>
        </button>
        
        <!-- More than a Feeling -->
         <button onclick="grabURL(event, 29)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fboston-boston.jpg?v=1597049792069"
            alt="More Than a Feeling Boston"
            width="600"
            height="400"
          />
          <div class="title">More Than a Feeling</div>
          <div class="artist">Boston</div>
        </button>
        
        <!-- Where Is My Mind -->
         <button onclick="grabURL(event, 30)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fpixies-surfer-rosa.jpg?v=1597105737389"
            alt="Where Is My Mind"
            width="600"
            height="400"
          />
          <div class="title">Where Is My Mind</div>
          <div class="artist">Pixies</div>
        </button>
        
         <!-- Cryin' -->
         <button onclick="grabURL(event, 31)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Faerosmith-pump.jpg?v=1597106237598"
            alt="Cryin'"
            width="600"
            height="400"
          />
          <div class="title">Cryin'</div>
          <div class="artist">Aerosmith</div>
        </button>
        
        <!-- Super Bass -->
         <button onclick="grabURL(event, 32)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fnicki-minaj-pink-friday.jpg?v=1597106428087"
            alt="Super Bass"
            width="600"
            height="400"
          />
          <div class="title">Superbass</div>
          <div class="artist">Nicki Minaj</div>
        </button>
        
          <!-- California Dreamin -->
         <button onclick="grabURL(event, 33)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fthe-mamas-and-the-papas-if-you-can-believe-your-eyes-and-ears.jpg?v=1597107066098"
            alt="California Dreamin'"
            width="600"
            height="400"
          />
          <div class="title">California Dreamin'</div>
          <div class="artist">The Mamas and the Papas</div>
        </button>
        
        <!-- The First Cut Is the Deepest -->
         <button onclick="grabURL(event, 34)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsheryl-crow-the_very_best_of_sheryl_crow.png?v=1597107235494"
            alt="The First Cut Is the Deepest"
            width="600"
            height="400"
          />
          <div class="title">The First Cut Is the Deepest</div>
          <div class="artist">Sheryl Crow</div>
        </button>
        
          <!-- Ddu-Du Ddu-Du (ÎöúÎëêÎöúÎëê) -->
         <button onclick="grabURL(event, 35)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fblack-pink-square-up.png?v=1597114366350"
            alt="Ddu-Du Ddu-Du (ÎöúÎëêÎöúÎëê)"
            width="600"
            height="400"
          />
          <div class="title">Ddu-Du Ddu-Du (ÎöúÎëêÎöúÎëê)</div>
          <div class="artist">Blackpink</div>
        </button>
        
         <!-- Havana -->
         <button onclick="grabURL(event, 36)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fcamila-cabello-camila.png?v=1597115047844"
            alt="Havana"
            width="600"
            height="400"
          />
          <div class="title">Havana ft. Young Thug</div>
          <div class="artist">Camila Cabello</div>
        </button>
        
         <!-- Hooked on a Feeling -->
         <button onclick="grabURL(event, 37)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FBlue_Swede_Hooked_on_a_Feeling.jpeg?v=1597115341619"
            alt="Havana"
            width="600"
            height="400"
          />
          <div class="title">Hooked on a Feeling</div>
          <div class="artist">Blue Swede</div>
        </button>
        
         <!-- Hello -->
         <button onclick="grabURL(event, 38)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fadele-25.png?v=1597116632498"
            alt="Hello"
            width="600"
            height="400"
          />
          <div class="title">Hello</div>
          <div class="artist">Adele</div>
        </button>
        
        <!-- Best I Ever Had -->
         <button onclick="grabURL(event, 39)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FDrake_Thank_Me_Later.jpg?v=1597116955766"
            alt="Hello"
            width="600"
            height="400"
          />
          <div class="title">Best I Ever Had</div>
          <div class="artist">Drake</div>
        </button>
        
         <!-- Crazy in Love -->
         <button onclick="grabURL(event, 40)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FBeyonce_Dangerously_In_Love.png?v=1597208523041"
            alt="Beyonce Dangerously in Love"
            width="600"
            height="400"
          />
          <div class="title">Crazy in Love ft. Jay Z</div>
          <div class="artist">Beyonc√©</div>
        </button>
        
         <!-- Burnin' Up -->
         <button onclick="grabURL(event, 41)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FJonas_Brothers_A_Little_Bit_Longer.jpg?v=1597208768173"
            alt="Jonas Brothers"
            width="600"
            height="400"
          />
          <div class="title">Burnin' Up</div>
          <div class="artist">Jonas Brothers</div>
        </button>
        
        <!-- Truth Hurts -->
         <button onclick="grabURL(event, 42)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FLizzo_Cuz_I_Love_You.png?v=1597208778608"
            alt="Lizzo Cus I love You"
            width="600"
            height="400"
          />
          <div class="title">Truth Hurts</div>
          <div class="artist">Lizzo</div>
        </button>
        
        
        <!-- Boy with Luv -->
         <button onclick="grabURL(event, 43)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FBTS_Map_of_the_Soul_7.png?v=1597208780997"
            alt="BTS Map of the Soul 7"
            width="600"
            height="400"
          />
          <div class="title">Boy With Luv (ÏûëÏùÄ Í≤ÉÎì§ÏùÑ ÏúÑÌïú Ïãú) ft. Halsey</div>
          <div class="artist">BTS</div>
        </button>
        
        <!-- Bodak Yellow -->
         <button onclick="grabURL(event, 44)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FCardi_B_Invasion_of_Privacy.png?v=1597208784442"
            alt="BTS Map of the Soul 7"
            width="600"
            height="400"
          />
          <div class="title">Bodak Yellow</div>
          <div class="artist">Cardi B</div>
        </button>
         
         <!-- Yesterday -->
         <button onclick="grabURL(event, 45)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FThe_Beatles_Help.jpg?v=1597386383196"
            alt="The Beatles - Help!"
            width="600"
            height="400"
          />
          <div class="title">Yesterday</div>
          <div class="artist">The Beatles</div>
        </button>
        
        <!-- Senorita -->
        <button onclick="grabURL(event, 46)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FShawn_Mendes_Shawn_Mendes.png?v=1597389147244"
            alt="Shawn Mendes - Shawn Mendes"
            width="600"
            height="400"
          />
          <div class="title">Se√±orita</div>
          <div class="artist">Shawn Mendes, Camila Cabella</div>
        </button>
        
        <!-- I Will Always Love You -->
        <button onclick="grabURL(event, 47)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FThe_Bodyguard_Original_Soundtrack_Album.jpg?v=1597389683244"
            alt="Whitney Houston - I Will ALways Love You"
            width="600"
            height="400"
          />
          <div class="title">I Will Always Love You</div>
          <div class="artist">Whitney Houston</div>
        </button>
        
        <!-- Under the Bridge -->
        <button onclick="grabURL(event, 48)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FRed_Hot_Chili_Peppers_BSSM.jpg?v=1597433975118"
            alt="Red Hot Chili Peppers"
            width="600"
            height="400"
          />
          <div class="title">Under the Bridge</div>
          <div class="artist">Red Hot Chili Peppers</div>
        </button>

        <!-- Jolene -->
        <button onclick="grabURL(event, 49)" class="jukebox" type="button">
          <img
            src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2FDolly_Parton_Jolene.jpg?v=1597434213221"
            alt="Dolly Parton"
            width="600"
            height="400"
          />
          <div class="title">Jolene</div>
          <div class="artist">Dolly Parton</div>
        </button>

      </div>

      <div id="added-notice">
          <button class="added-notice-contents" onclick="dismissAddedNotice()">
          You just added <span id="added-notice-song"></span> to the song queue!
          </button>
      </div>

      <div class="controls">
        <!-- <a class="control" href="#" rel="modal:close">Add Song</a> -->

        <a class="button" href="#" rel="modal:close">Done</a>
        <button class="button button-bold" disabled id="choose-song" onclick="addSong()">
          Choose Song
        </button>
      </div>
    </div>
    
    
    
    <!-- Peopl in the room modal (Sonny WIP) -->
    <div id="peopleModal" class="modal">
      <h2>Who's in this room:</h2>
      
      <div id="usersList">        
        <ul id="list" style="list-style: none;">
          <li id="list1"> <img src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-pink.svg?v=1595297080213"/> <span id="host">User 1</span> <strong>(Host)</strong></li>
          <li id="list2"> <img src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-purple.svg?v=1595889983311"/> <span id="user2">User 2</span></li>
          <li id="list3"> <img src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-lime.svg?v=1595889983227"/> <span id="user3">User 3</span></li>
        </ul>
      </div>
      <p>The more the merrier. Why not make it a party?</p>

      <!--       <div class="controls">
        <a class="button" href="#" rel="modal:close">Done</a>
      </div> -->

     <a
      id="invite2"
      class="button button-bold"
      href="#inviteModal"
      rel="modal:open"
      title="Invite friends to the room"
      >Invite Friends</a
    >
      
      <br />
    </div>
    
    <script>
      var numUsers = 0;
      var host= 'Placeholder';

      h = document.getElementById("host");
      h.innerHTML = host;

      console.log("testestes");
      // const socket = io.set('transports', ['polling']);
      
      // var socket = io('wss://localhost:8080', {transports: ['websocket']});


      // socket.on('reconnect_attempt', () => {
      //   socket.io.opts.transports = ['polling', 'websocket'];
      // })
      
      console.log("socket: " + socket);
      
//       socket.on('occupants', function(data) {
        
//         console.log("print stuff!!!!!!!!!!!!!!!!!");
//         console.log(data[0].username);
//         console.log(data[1].username);
        
//       });

      socket.on('sendAllUsernames', function(data) {
        // console.log("TESTTTTTTT");
        //console.log(data);
        // console.log(data.length);
        //console.log("Host NAME");
        //console.log(data[0]);
        //h.innerHTML = data[0];
        console.log(data);
        const {usernames} = data;
        
        var images = [
          'https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-pink.svg?v=1595297080213',
          'https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-purple.svg?v=1595889983311',
          'https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-lime.svg?v=1595889983227',
          'https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-orange.svg?v=1596833741466',
          'https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-cyan.svg?v=1596833741434'
        ];
        
        var $users = [];
        
        usernames.map((username, id) => {
          var image = images[id % images.length];
          const $user = $('<li id="list'+id+'"><img src="'+image+'"><span id="host">'+username+'</span><strong>'+((id===0)?' (Host)':'')+'</strong></li>');
          $users.push($user);
        });
        
        $('#list').empty();
        
        if ($users.length) {
          $users.map($user => $user.appendTo($('#list')));
        }
        numUsers = usernames.length;
        /*
        if (data.length >= 2) {
        
          console.log("second user name");
          console.log(data[1]);
          
          var list2 = document.getElementById("list2");       
          list2.style.display='block';
          
          var span = document.getElementById("user2");
          span.innerHTML = data[1];
          
//           var img = document.createElement("img");
//           img.src = "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-purple.svg?v=1595889983311";
//           var src = document.getElementById("list");
//           src.appendChild(img);
          
//           var span = document.createElement("span");
//           span.id = "user2";
//           span.innerHTML = data[1];
//           src.appendChild(span);
        }
        
        if (data.length >= 3) {
        
          console.log("third user name");
          console.log(data[2]);
          
          var list3 = document.getElementById("list3");       
          list3.style.display='block';
          
          var span = document.getElementById("user3");
          span.innerHTML = data[2];
          
//           var img = document.createElement("img");
//           img.src = "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-purple.svg?v=1595889983311";
//           var src = document.getElementById("list");
//           src.appendChild(img);
          
//           var span = document.createElement("span");
//           span.id = "user2";
//           span.innerHTML = data[1];
//           src.appendChild(span);
        }
        */
        
      });
      
      socket.on('sendAllUsernamesDisconnect', function(data) {
        var images = [
          'https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-pink.svg?v=1595297080213',
          'https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-purple.svg?v=1595889983311',
        ];
        var $users = [];
        console.log(data);
        const {usernames} = data;
        usernames.map((username, id) => {
          var image = images[id % images.length];
          const $user = $('<li id="list'+id+'"><img src="'+image+'"><span id="host">'+username+'</span><strong>'+((id===0)?'(Host)':'')+'</strong></li>');
          $users.push($user);
        });
        $('#list').empty();
        if ($users.length) {
          $users.map($user => $user.appendTo($('#list')));
        }
                numUsers = usernames.length;

        /*
        if (data.length >= 2) {
          
          console.log("second user name");
          console.log(data[1]);
          
          var list2 = document.getElementById("list2");       
          list2.style.display='block';
          
          var span = document.getElementById("user2");
          span.innerHTML = data[1];
          
        }
        
        if (data.length >= 3) {
        
          console.log("third user name");
          console.log(data[2]);
          
          var list3 = document.getElementById("list3");       
          list3.style.display='block';
          
          var span = document.getElementById("user3");
          span.innerHTML = data[2];
          
        }
        */
      });

      

      
  
//       socket.on('sendUsername', function(data) {
        
//         numUsers++;
        
//         console.log("The number of users is " + numUsers);
        
//         if (numUsers == 1) {
//           console.log("host name");
//           console.log(data.username);
//           h.innerHTML = data.username;
//         }        
          
//         else if (numUsers > 1) {
          
//           console.log("sencond user name");
//           console.log(data.username);
          
//           var img = document.createElement("img");
//           img.src = "https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-purple.svg?v=1595889983311";
//           var src = document.getElementById("list");
//           src.appendChild(img);
          
//           var span = document.createElement("span");
//           span.id = "user2";
//           span.innerHTML = data.username;
//           src.appendChild(span);
          
// //           src = document.getElementById("smiley");
// //           src.id="smiley2"
// //           src.appendChild(img);      
          
//         }
        
//     });
    console.log("TESTESTESTTEST");
    </script>

    <!-- People in the room number (Sonny WIP) -->
    <div alt="Number of people in the room" id="counter"></div>

    <!-- Modal Buttons -->

    <!-- Smiley Face -->
    <a
      id="smiley"
      href="#peopleModal"
      rel="modal:open"
      title="Number of poeple in the room"
    >
      <img
        id="smiley1"
        src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-pink.svg?v=1595297080213"
      />
      <img
        id="smiley2"
        src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-purple.svg?v=1595889983311"
      />
      <img
        id="smiley3"
        src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Fsmiley-lime-dark.svg?v=1595889983260"
      />
    </a>
    
    <script>
      ctr = document.getElementById("counter");
      ctr.innerHTML = 1;
      
      // Add one
      socket.on("newClientConnect", function(data) {
        console.log("increment one");
        ctr.innerHTML = data;
        numUsers = data;
        
        if (numUsers == 2) {
          var smiley2 = document.getElementById("smiley2");       
          smiley2.style.visibility='visible';
        }
        
        if (numUsers > 2) {
          var smiley3 = document.getElementById("smiley2");
          smiley3.style.visibility='visible';
          
          smiley3 = document.getElementById("smiley3");
          smiley3.style.visibility='visible';
        }
        
      });
      
      // Minus one
      socket.on("newClientDisconnect", function(data) {
        console.log("decrement one");
        ctr.innerHTML = data;
        numUsers = data;
      });
      
    </script>
  
  
  
     <script>
      let ctr2 = document.getElementById("roomName");
      ctr2.innerHTML = 'as';
      
      // Add one
      socket.on("sendRoomName", data => {
        console.log("data is", data.name);
        
        // curRoom = joinRoom(data);
        ctr2.innerHTML = data.name;
        
      });
       
  
  </script>
    
    <!-- Invite Friends -->
    <a
      id="invite"
      class="button"
      href="#inviteModal"
      rel="modal:open"
      title="Invite friends to the room"
      >Invite Friends</a
    >

    <!-- Add song -->
    <a
      id="song"
      class="button button-bold"
      href="#songModal"
      rel="modal:open"
      title="Add a song to the queue"
      >Add Song</a
    >

        
    <!-- Peopl in the room modal (Sonny WIP) -->
    <div id="feedbackModal" class="modal">
      <h2>Give us feedback!</h2>
      <p>
        Karaoke Nite is an ongoing project. We're looking to hear your thoughts on how to make it even better!
      </p>
      
    <a
      id="giveFeedbackButton"
      class="button button-bold"
      href="https://karaokenite.typeform.com/to/SaHxnvyT"
      target="_blank"
      title="Invite friends to the room"
      >Give Feedback</a
    >
      <br>
      
    <a
      id="reportBugButton"
      class="button"
      href="https://karaokenite.typeform.com/to/qqQslFgC"
      target="_blank"
      title="Invite friends to the room"
      >Report a Bug</a
    >
      
      
    </div>
    
    <!-- Feedback -->
    <a
      id="feedback"
      class="button button-bold"
      href="#feedbackModal"
      rel="modal:open"
      title="Give some feedback or report a bug üîé"
      >
<!--     <img id="asdf" src="https://cdn.glitch.com/b316bbdc-0b0c-4c6d-94fb-fffb37f510a9%2Ffeedback.svg?v=1596918776029"> -->
</a>
    
    <div id="instructions">
      <kbd>w</kbd><kbd>a</kbd><kbd>s</kbd><kbd>d</kbd> to move.

      <kbd>space</kbd> to change the scenery. Drag the mouse to look around.
      Currently, only host can control the buttons.
    </div>
    
    
    
    
    
    
    
         <script>
        window.twttr = (function(d, s, id) {
          var js,
            fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
          if (d.getElementById(id)) return t;
          js = d.createElement(s);
          js.id = id;
          js.src = "https://platform.twitter.com/widgets.js";
          fjs.parentNode.insertBefore(js, fjs);

          t._e = [];
          t.ready = function(f) {
            t._e.push(f);
          };

          return t;
        })(document, "script", "twitter-wjs");
      </script>

      <script>
        function myFunction() {
          var copyText = document.getElementById("myInput");
          copyText.select();
          copyText.setSelectionRange(0, 99999);
          document.execCommand("copy");

          var tooltip = document.getElementById("myTooltip");
          tooltip.innerHTML = "Copied!";
          // tooltip.innerHTML = "Copied " + copyText.value;
        }

        function outFunc() {
          var tooltip = document.getElementById("myTooltip");
          tooltip.innerHTML = "Copy to clipboard";
        }
      </script>
  </body>
</html>
